{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//const API_KEY='41849458-2d98265c06659a45ba73a30c';\n\nimport axios from 'axios';\n\nconst apiKey = '41849458-2d98265c06659a45ba73a30c';\nexport async function searchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?key=${apiKey}&q=${query}&page=${page}&per_page=${perPage}`);\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw error;\n    }\n}","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.getElementById('loader');\nconst gallery = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\n\nexport function renderGallery(images, isFirstLoad) {\n  if (isFirstLoad) {\n    loader.style.display = 'none';\n  }\n\n  if (images.length === 0) {\n    iziToast.info({\n      title: 'Info',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    hideLoadMoreButton();\n    return;\n  }\n\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.classList.add('card');\n    card.innerHTML = `\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <p>Likes: ${image.likes}</p>\n            <p>Views: ${image.views}</p>\n            <p>Comments: ${image.comments}</p>\n            <p>Downloads: ${image.downloads}</p>\n        `;\n    gallery.appendChild(card);\n  });\n\n  lightbox.refresh();\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nexport function showEndOfCollectionMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showEndOfCollectionMessage,\n} from './js/render-functions.js';\n\nconst loader = document.getElementById('loader');\nconst gallery = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\n\nconst LOADER_DISPLAY_BLOCK = 'block';\nconst LOADER_DISPLAY_NONE = 'none';\nconst PER_PAGE = 15;\n\nfunction setLoaderDisplay(displayValue) {\n  loader.style.display = displayValue;\n}\n\nlet currentPage = 1;\nlet allResultsFetched = false;\n\nsearchForm.addEventListener('submit', async function (e) {\n  e.preventDefault();\n  const searchTerm = searchInput.value.trim();\n\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term',\n    });\n    return;\n  }\n\n  setLoaderDisplay(LOADER_DISPLAY_BLOCK);\n  gallery.innerHTML = '';\n  currentPage = 1;\n  allResultsFetched = false;\n\n  try {\n    const data = await searchImages(searchTerm, currentPage);\n    renderGallery(data.hits, true);\n\n    if (data.hits.length === 0) {\n      hideLoadMoreButton();\n      showEndOfCollectionMessage();\n    } else {\n      showLoadMoreButton();\n      smoothScrollToGallery();\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching data. Please try again.',\n    });\n  } finally {\n    setLoaderDisplay(LOADER_DISPLAY_NONE);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n  currentPage++;\n  try {\n    if (allResultsFetched) {\n      hideLoadMoreButton();\n      showEndOfCollectionMessage();\n      return;\n    }\n\n    const searchTerm = searchInput.value.trim();\n    setLoaderDisplay(LOADER_DISPLAY_BLOCK);\n\n    const data = await searchImages(searchTerm, currentPage);\n\n    if (!data.hits || data.hits.length === 0) {\n      allResultsFetched = true;\n      hideLoadMoreButton();\n      showEndOfCollectionMessage();\n    } else {\n      renderGallery(data.hits, false);\n      smoothScrollToGallery();\n    }\n\n    if (data.totalHits <= currentPage * PER_PAGE) {\n      allResultsFetched = true;\n      hideLoadMoreButton();\n      showEndOfCollectionMessage();\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching more data. Please try again.',\n    });\n  } finally {\n    setLoaderDisplay(LOADER_DISPLAY_NONE);\n  }\n});\n\nfunction smoothScrollToGallery() {\n  const cards = document.querySelectorAll('.card');\n\n  if (cards.length > 0) {\n    const cardHeight = cards[0].getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  }\n}\n"],"names":["apiKey","searchImages","query","page","perPage","axios","error","loader","gallery","lightbox","SimpleLightbox","loadMoreBtn","renderGallery","images","isFirstLoad","iziToast","hideLoadMoreButton","image","card","showLoadMoreButton","showEndOfCollectionMessage","searchForm","searchInput","LOADER_DISPLAY_BLOCK","LOADER_DISPLAY_NONE","PER_PAGE","setLoaderDisplay","displayValue","currentPage","allResultsFetched","e","searchTerm","data","smoothScrollToGallery","cards","cardHeight"],"mappings":"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"}